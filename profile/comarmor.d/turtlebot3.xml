<?xml version="1.0" encoding="utf-8"?>
<profiles xmlns:xi="http://www.w3.org/2001/XInclude">
  <profile name="ROS2 CLI Node Daemon">
    <attachments>
      <attachment>/_ros2cli_node_daemon_0</attachment>
    </attachments>
  </profile>

  <profile name="Turtlebot3 HLDS Laser Publisher">
    <attachments>
      <attachment>/hlds_laser_publisher</attachment>
    </attachments>
    <xi:include href="common/node.xml" parse="xml" />

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/scan</attachment>
      </attachments>
      <permissions>
        <ros_publish/>
      </permissions>
    </ros_topic>
  </profile>

  <profile name="Turtlebot3 Joint States Publisher">
    <attachments>
      <attachment>/joint_states_publisher</attachment>
    </attachments>
    <xi:include href="common/node.xml" parse="xml" />

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/sensor_state</attachment>
      </attachments>
      <permissions>
        <ros_subscribe/>
      </permissions>
    </ros_topic>
    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/joint_states</attachment>
      </attachments>
      <permissions>
        <ros_publish/>
      </permissions>
    </ros_topic>
  </profile>

  <profile name="Turtlebot3 Odometry Publisher">
    <attachments>
      <attachment>/odometry_publisher</attachment>
    </attachments>
    <xi:include href="common/node.xml" parse="xml" />

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/imu</attachment>
        <attachment>/sensor_state</attachment>
      </attachments>
      <permissions>
        <ros_subscribe/>
      </permissions>
    </ros_topic>
    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/odom</attachment>
      </attachments>
      <permissions>
        <ros_publish/>
      </permissions>
    </ros_topic>
  </profile>

  <profile name="Turtlebot3 Robot State Publisher">
    <attachments>
      <attachment>/robot_state_publisher</attachment>
    </attachments>
    <xi:include href="common/node.xml" parse="xml" />

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/joint_states</attachment>
      </attachments>
      <permissions>
        <ros_subscribe/>
      </permissions>
    </ros_topic>
    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/robot_description</attachment>
        <attachment>/tf</attachment>
        <attachment>/tf_static</attachment>
      </attachments>
      <permissions>
        <ros_publish/>
      </permissions>
    </ros_topic>
  </profile>

  <profile name="Turtlebot3 Rviz">
    <attachments>
      <attachment>/rviz</attachment>
    </attachments>
    <xi:include href="common/rviz.xml" parse="xml" />

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/scan</attachment>
        <attachment>/scan_half</attachment>
      </attachments>
      <permissions>
        <ros_subscribe/>
      </permissions>
    </ros_topic>
    <ros_topic qualifier="ALLOW">
      <attachments>
        <!-- FIXME: This rviz profile still seems to be missing somthing and
        doesn't work withouth this. Find exactly what else rviz work -->
        <attachment>*</attachment>
      </attachments>
      <permissions>
        <ros_subscribe/>
      </permissions>
    </ros_topic>
    <!-- <topic qualifier="ALLOW">
      <attachments>
        <attachment>*</attachment>
      </attachments>
      <permissions>
        <publish/>
        <subscribe/>
      </permissions>
    </topic> -->
  </profile>

  <profile name="Turtlebot3 Scan Re-Publisher">
    <attachments>
      <attachment>/scan_publisher</attachment>
    </attachments>
    <xi:include href="common/node.xml" parse="xml" />

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/scan_half</attachment>
      </attachments>
      <permissions>
        <ros_subscribe/>
      </permissions>
    </ros_topic>
    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/scan</attachment>
      </attachments>
      <permissions>
        <ros_publish/>
      </permissions>
    </ros_topic>
  </profile>

  <profile name="Turtlebot3 TF Publisher">
    <attachments>
      <attachment>/tf_publisher</attachment>
    </attachments>
    <xi:include href="common/node.xml" parse="xml" />

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/odom</attachment>
      </attachments>
      <permissions>
        <ros_subscribe/>
      </permissions>
    </ros_topic>
    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/tf</attachment>
      </attachments>
      <permissions>
        <ros_publish/>
      </permissions>
    </ros_topic>
  </profile>

  <profile name="Turtlebot3 Time Sync">
    <attachments>
      <attachment>/time_sync</attachment>
    </attachments>
    <xi:include href="common/node.xml" parse="xml" />

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/time_sync</attachment>
      </attachments>
      <permissions>
        <ros_publish/>
      </permissions>
    </ros_topic>
  </profile>

  <profile name="Turtlebot3 Openrc">
    <attachments>
      <attachment>/turtlebot3_openrc</attachment>
    </attachments>

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/cmd_vel</attachment>
        <attachment>/motor_power</attachment>
        <attachment>/reset</attachment>
        <attachment>/time_sync</attachment>
      </attachments>
      <permissions>
        <ros_subscribe/>
      </permissions>
    </ros_topic>
    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/imu</attachment>
        <attachment>/joint_states</attachment>
        <attachment>/sensor_state</attachment>
        <attachment>/version_info</attachment>
      </attachments>
      <permissions>
        <ros_publish/>
      </permissions>
    </ros_topic>
  </profile>

  <profile name="Turtlebot3 Teleop Keyboard">
    <attachments>
      <attachment>/turtlebot3_teleop_key</attachment>
    </attachments>

    <ros_topic qualifier="ALLOW">
      <attachments>
        <attachment>/cmd_vel</attachment>
      </attachments>
      <permissions>
        <ros_publish/>
      </permissions>
    </ros_topic>
  </profile>
</profiles>
